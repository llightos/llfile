# llfile

## 架构设计

用户模块和鉴权模块通过etcd进行服务注册与发现，其余的数据中心统一

文件管理采用虚路径，只由数据库记录文件路径，其余的以hash.llfile的格式统一管理

文件的上传和下载以事件为单位，所有要上传和下载之前需填好参数，获取上传或者下载的事件id

## 实现的功能

### 文件上传 

先获取上传事件id，再调用上传接口进行上传

### 文件修改（路径修改、重命名等）

虚路径，调用对应接口即可

### 文件下载

先获取下载事件id，再调用下载接口进行下载

### 断点续传

上传时断了，客户端要用事件id询问服务端断点是多少，再续传

下载时断了，客户端在Header加上Bytes字段告诉服务端你应该seek到哪

### 加密分享链接

分享者通过调用对应接口获取连接

接受者通过不鉴权接口来下载

### 下载限速

对象继承实现了ReaderWriter或者Reader接口的对象，来实现自己的Read和Write方法，里面加个令牌桶

## 接口介绍

https://www.apifox.cn/apidoc/project-1376864/api-31991667

其他的在llfile_client_test里（写的乱）